# Реализация клиента

### Многооконность

Для реализации нужно было определиться с тем, как будет осуществляться смена контента в окне. Сначала были созданы  разные окна на каждую задачу, но такой варинат никуда не годится.
Поэтому, был написан навигатор, который умеет заменять экраны внутри QStackedWidget и предоставляет различные сценарии переходов от одного экрана к другому. Также необходимо знать о предыдущих экранах для возможности вернуться к ним и как-то передавать данные.

На рисунке 1 представлена схема приложения и переходы. Когда приложение запускается, мы видим заставку, потом выполняется замена экрана на стартовый. Далее осуществляется смена экранов при нажатии кнопок.
<p align="center">
  <img src="https://sun9-28.userapi.com/impg/WanJ2WfjRoESrmF5WW_NbpLI0Ewv5h7cYTiAIw/OljQnaamNaE.jpg?size=576x407&quality=96&sign=259b17d33fcac51f2a4e3f9b19c94657&type=album" />
</br>
Рис. 1
</p>

Подробнее про реализацию взаимодействия экранов: https://habr.com/ru/post/550440/

А далее каждое окно было заполнено нужными слоями с виджетами. Которые в свою очередь соединены сигналами и слотами. И были реализованы функции обработок сигналов.

### Отправка Http-запроса

Для отправки http запроса и получения ответа используется QNetworkAccessManager. 
И тут были потрачено много дней, чтобы разобраться в проблеме соединения Клиента с сервером.
Сервер принимает запрос, считывает заголовки, но тело запроса не видит, будто оно пустое.

Причем при отправке запроса с Postman или QUrl на наш сервер - все работает.

Причем при отправке  запроса с Qt на ехо сервер в интернете - все работает.

Но при связке Qt-клиент  -  наш сервер тело запроса куда то исчезает.

Примеры всех 3 взамимодествий: https://drive.google.com/file/d/1GC6AZUinCqThovLR4lYgEgC2eIcEkhTP/view?usp=sharing

Так как до защиты оставалось пару дней, а на решение этой проблемы было уделено ооочень много времени. Совместными усилиями пришли к пока что единственному выходу из ситуации: отправка JSON в заголовке запроса.
Создается заголовок с названием "JSON_DATA", а далее в его значение записывается JSON.

### Обработка Http-ответа

Ответ приходит в виде JSON. Далее генерирутся слои/виджеты, куда записываются данные с распарсенного JSON.


### Косяки

* Связь Qt-сервер
* Много кода, малло комментариев
* Копипаста при создании слоев
* не responsive design


### Ссылки на демнострацию работы клиента:

* [Meet_up v.3 (15.01.22)](https://www.youtube.com/watch?v=YraDpnZb7vk)
* [Meet_up v.2](https://www.youtube.com/watch?v=1rmKo4pDfnI)
* [Meet_up v.1](https://www.youtube.com/watch?v=sgDWmKSD5C8)
* [Meet_up v.0](https://youtu.be/VJB7_AQeRMI)
